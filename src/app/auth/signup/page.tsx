// Cdw-Spm
"use client";import { useEffect, useState } from "react";type Role="PASS_USER"|"PRACTITIONER"|"ARTISAN"|"COMMERCANT";export default function Signup(){const [role,setRole]=useState<Role>("PASS_USER");const [userPlan,setUserPlan]=useState<"FREE"|"PASS">("FREE");const [proStep,setProStep]=useState(0);const [mStep,setMStep]=useState(0);const proSteps=["Identité","Pratique","Éthique & pièces","Récap"];const mSteps=["Structure","Offres","Cotisation"];useEffect(()=>{setProStep(0);setMStep(0);},[role]);return(<main className="section"><div className="container-spy grid gap-4"><header><h1 className="text-3xl font-semibold">Créer un compte</h1><p className="text-muted">Choisissez votre profil et complétez les informations demandées.</p></header><div className="auth-card"><div className="grid md:grid-cols-2 gap-4"><div><label className="font-semibold" htmlFor="role">Je suis…</label><select id="role" className="w-full rounded-lg border border-border" value={role} onChange={(e)=>setRole(e.target.value as Role)}><option value="PASS_USER">Particulier</option><option value="PRACTITIONER">Praticien</option><option value="ARTISAN">Artisan</option><option value="COMMERCANT">Commerçant</option></select></div>{role === "PASS_USER" && (<div><label className="font-semibold">Formule</label><div className="chips-row"><button type="button" onClick={()=>setUserPlan("FREE")} className={`chip ${userPlan==="FREE"?"chip-active":""}`}>Gratuit</button><button type="button" onClick={()=>setUserPlan("PASS")} className={`chip ${userPlan==="PASS"?"chip-active":""}`}>PASS</button></div><p className="text-sm text-muted">Gratuit : profil, favoris, recherche. PASS : + carnet de vie, ressources premium, réductions.</p></div>)}</div></div>{role === "PASS_USER" && (<form className="auth-card auth-form" method="post" action="/auth/register" noValidate><div className="grid md:grid-cols-2 gap-4"><div><label className="font-semibold" htmlFor="name">Nom complet</label><input id="name" name="name" className="w-full rounded-lg border border-border" required/></div><div><label className="font-semibold" htmlFor="email">Email</label><input id="email" name="email" type="email" className="w-full rounded-lg border border-border" required/></div></div><div className="grid md:grid-cols-2 gap-4"><div><label className="font-semibold" htmlFor="password">Mot de passe</label><input id="password" name="password" type="password" minLength={8} className="w-full rounded-lg border border-border" required/></div><div><label className="font-semibold" htmlFor="password2">Confirmation</label><input id="password2" name="password2" type="password" minLength={8} className="w-full rounded-lg border border-border" required/></div></div><label className="inline-flex items-center gap-2"><input type="checkbox" required/><span>J’accepte les <a className="text-accent" href="/legal/cgu">CGU</a> et la <a className="text-accent" href="/legal/confidentialite">politique de confidentialité</a>.</span></label><div className="flex gap-2 flex-wrap"><button className="btn" type="submit">Créer mon compte</button><a className="btn btn-outline" href="/auth/login">J’ai déjà un compte</a></div>{userPlan === "PASS" && (<div className="mt-3 p-4 rounded-xl border border-accent/30 bg-[#f7fbfd]"><p>Vous avez choisi <strong>PASS</strong>. Après validation de votre email, vous serez redirigé vers le paiement pour débloquer vos accès PASS.</p><a className="btn mt-2" href="#lien-paiement-pass" rel="nofollow noopener">Payer mon PASS</a></div>)}</form>)}{role === "PRACTITIONER" && (<form className="auth-card auth-form" method="post" action="/auth/register-pro" onSubmit={(e)=>{e.preventDefault();alert("Candidature envoyée. Réponse sous 48h.");}}><div className="grid md:grid-cols-4 gap-2 stepper">{["Identité","Pratique","Éthique & pièces","Récap"].map((s,i)=>(<div key={s} className={`step ${i<=proStep?"step-active":""}`}>{i+1}. {s}</div>))}</div>{proStep===0 && (<div className="step-pane"><div className="grid md:grid-cols-2 gap-4"><div><label className="font-semibold">Prénom</label><input className="w-full rounded-lg border border-border" required/></div><div><label className="font-semibold">Nom</label><input className="w-full rounded-lg border border-border" required/></div></div><div className="grid md:grid-cols-2 gap-4"><div><label className="font-semibold">Email</label><input type="email" className="w-full rounded-lg border border-border" required/></div><div><label className="font-semibold">Mot de passe</label><input type="password" minLength={8} className="w-full rounded-lg border border-border" required/></div></div></div>)}{proStep===1 && (<div className="step-pane"><div className="grid md:grid-cols-2 gap-4"><div><label className="font-semibold">Discipline principale</label><input className="w-full rounded-lg border border-border" placeholder="Réflexologie" required/></div><div><label className="font-semibold">Ville d’exercice</label><input className="w-full rounded-lg border border-border" required/></div></div><div><label className="font-semibold">Années d’expérience</label><input type="number" min={0} className="w-full rounded-lg border border-border" required/></div></div>)}{proStep===2 && (<div className="step-pane"><div><label className="font-semibold">Charte éthique</label><textarea className="w-full rounded-lg border border-border" rows={4} placeholder="Vos engagements (déontologie, non-substitution…)" required/></div><div><label className="font-semibold">Pièces (liens)</label><input className="w-full rounded-lg border border-border" placeholder="Diplôme/assurance (URL)"/></div><label className="inline-flex items-center gap-2"><input type="checkbox" required/><span>Je certifie l’exactitude des informations.</span></label></div>)}{proStep===3 && (<div className="step-pane"><div className="card"><p className="text-muted">Vérifiez vos informations puis envoyez votre candidature. Réponse sous <strong>48h</strong> par email.</p></div><button className="btn" type="submit">Envoyer ma candidature</button><div className="mt-3 p-4 rounded-xl border border-accent/30 bg-[#f7fbfd]"><p>Si votre candidature est <strong>acceptée</strong>, réglez l’abonnement pour débloquer vos accès Pro.</p><a className="btn mt-2" href="#lien-paiement-pro">Payer mon abonnement Pro</a></div></div>)}<div className="flex gap-2 justify-end"><button className="btn btn-outline" type="button" onClick={()=>setProStep(Math.max(0,proStep-1))} disabled={proStep===0}>Précédent</button><button className="btn" type="button" onClick={()=>setProStep(Math.min(3,proStep+1))}>{proStep===3?"Terminer":"Suivant"}</button></div></form>)}{(role === "ARTISAN" || role === "COMMERCANT") && (<form className="auth-card auth-form" method="post" action="/auth/register-merchant" onSubmit={(e)=>{e.preventDefault();alert("Inscription soumise. Activation après vérifications.");}}><div className="grid md:grid-cols-3 gap-2 stepper">{["Structure","Offres","Cotisation"].map((s,i)=>(<div key={s} className={`step ${i<=mStep?"step-active":""}`}>{i+1}. {s}</div>))}</div>{mStep===0 && (<div className="step-pane"><div><label className="font-semibold">Type</label><select className="w-full rounded-lg border border-border" defaultValue={role}><option>Artisan</option><option>Commerçant</option></select></div><div className="grid md:grid-cols-2 gap-4"><div><label className="font-semibold">Raison sociale</label><input className="w-full rounded-lg border border-border" required/></div><div><label className="font-semibold">Ville</label><input className="w-full rounded-lg border border-border" required/></div></div><div className="grid md:grid-cols-2 gap-4"><div><label className="font-semibold">Email</label><input type="email" className="w-full rounded-lg border border-border" required/></div><div><label className="font-semibold">Mot de passe</label><input type="password" minLength={8} className="w-full rounded-lg border border-border" required/></div></div></div>)}{mStep===1 && (<div className="step-pane"><div><label className="font-semibold">Catégories d’offres</label><input className="w-full rounded-lg border border-border" placeholder="Hygiène, vrac, cosmétique…"/></div><div><label className="font-semibold">Description</label><textarea className="w-full rounded-lg border border-border" rows={4}/></div></div>)}{mStep===2 && (<div className="step-pane"><p className="text-muted">L’inscription comporte une <strong>cotisation</strong>, activation sous réserve de vérifications (k-bis, site, etc.).</p><label className="inline-flex items-center gap-2"><input type="checkbox" required/><span>J’accepte les vérifications et la charte commerçant/artisan.</span></label><button className="btn" type="submit">Soumettre mon inscription</button><div className="mt-3 p-4 rounded-xl border border-accent/30 bg-[#f7fbfd]"><p>Après validation du dossier, réglez la cotisation pour activer vos accès.</p><a className="btn mt-2" href="#lien-paiement-merchant">Payer la cotisation</a></div></div>)}<div className="flex gap-2 justify-end"><button className="btn btn-outline" type="button" onClick={()=>setMStep(Math.max(0,mStep-1))} disabled={mStep===0}>Précédent</button><button className="btn" type="button" onClick={()=>setMStep(Math.min(2,mStep+1))}>{mStep===2?"Terminer":"Suivant"}</button></div></form>)}</div></main>)}